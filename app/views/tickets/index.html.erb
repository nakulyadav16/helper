<%= link_to "New ticket", new_ticket_path, class: "btn btn-primary mb-4 rounded-0"%>

<div>
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Your Tickets</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Tickets Assigned to you </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">New Request</button>
        </li>
    </ul>

    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
            <% if @user_tickets.first == nil%>
                <p>you have not created any ticket.</p>
            <% else %>
                <table class= 'table table-bordered'  style="color:black; width:95%; margin:auto; background:white;">
                    <thead>
                        <tr>
                        <th> Subject </th>
                        <th> Priority </th>
                        <th> Status </th>
                        </tr>
                    </thead>
                    <tbody>
                        <%@user_tickets.each do |ticket|%>
                            <tr>
                                <td><%= link_to ticket.subject, ticket ,class: 'nav-link '  %></td> 
                                <td><%= ticket.priority %></td> 
                                <td><%= ticket.aasm_state %></td> 
                            </tr>
                        <%end%>
                    </tbody>
                </table>
            <% end %>
        </div> 
        
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
            <% if @assigned_tickets.first == nil%>
                <p>No one has assigned any ticket to you</p>
            <% else %>
                <table class= 'table table-bordered'  style="color:black; width:95%; margin:auto;background:white;">
                    <thead>
                        <tr>
                        <th> Subject </th>
                        <th> Priority </th>
                        <th> Status </th>
                        </tr>
                    </thead>
                    <tbody>
                        <%@assigned_tickets.each do |ticket|%>
                            <tr>
                                <td><%= link_to ticket.subject, ticket ,class: 'nav-link' %></td> 
                                <td><%= ticket.priority %></td> 
                                <td><%= ticket.aasm_state %></td> 
                            </tr>
                        <%end%>
                    </tbody>
                </table>
            <% end %>
        </div>

        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
            <%# this give some ticket object which is nil %>
            <%#= @assigned_tickets.first %> 
            <% if @new_request_tickets.first == nil %>
                <h4> No new request available </h4>
            <% else %>                
                <table class= 'table table-bordered'  style="color:black; width:95%; margin:auto;background:white;">
                    <thead>
                        <tr>
                        <th> Subject </th>
                        <th> Priority </th>
                        <th> Status </th>
                        </tr>
                    </thead>
                    <tbody>
                        <%@new_request_tickets.each do |ticket|%>
                            <tr>
                                <td><%= link_to ticket.subject, ticket ,class: 'nav-link ' %></td> 
                                <td><%= ticket.priority %></td> 
                                <td><%= ticket.aasm_state %></td> 
                            </tr>
                        <%end%>
                    </tbody>
                </table>
            <% end %>
        </div>
        
    </div>

</div>

<!--
<div style="color:white;">
    <h2>Here are all Tickets which you have created</h2>
    <table class= 'table table-bordered'  style="color:white; width:95%; margin:auto;">
        <thead>
            <tr>
              <th>Subject</th>
              <th>Priority</th>
              <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <%@user_tickets.each do |ticket|%>
                <tr>
                    <td><%= link_to ticket.subject, ticket ,class: 'nav-link text-white'  %></td> 
                    <td><%= ticket.priority %></td> 
                    <td><%= ticket.aasm_state %></td> 
                </tr>
            <%end%>
        </tbody>
    </table>


    <h2>Here are all Tickets assigned to you </h2>
    <table class= 'table table-bordered'  style="color:white; width:95%; margin:auto;">
        <thead>
            <tr>
              <th>Subject</th>
              <th>Priority</th>
              <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <%@assigned_tickets.each do |ticket|%>
                <tr>
                    <td><%= link_to ticket.subject, ticket ,class: 'nav-link text-white' %></td> 
                    <td><%= ticket.priority %></td> 
                    <td><%= ticket.aasm_state %></td> 
                </tr>
            <%end%>
        </tbody>
    </table>

    <h2> New Ticket Request </h2>
    <table class= 'table table-bordered'  style="color:white; width:95%; margin:auto;">
        <thead>
            <tr>
              <th>Subject</th>
              <th>Priority</th>
              <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <%@new_request_tickets.each do |ticket|%>
                <tr>
                    <td><%= link_to ticket.subject, ticket ,class: 'nav-link text-white' %></td> 
                    <td><%= ticket.priority %></td> 
                    <td><%= ticket.aasm_state %></td> 
                </tr>
            <%end%>
        </tbody>
    </table>
</div>
-->


